{"version":3,"sources":["file:///D:/Documents/2d-game-cocos-creator-v.3-main/2d-game-cocos-creator-v.3-main/assets/character/player.ts"],"names":["_decorator","Component","KeyCode","input","Input","Vec2","RigidBody2D","BoxCollider2D","Contact2DType","Label","bridge","ccclass","property","Player","type","score","collider","rigidbody","direction","walk_force","jump_force","onLoad","send","on","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","start","node","getComponent","BEGIN_CONTACT","onBeginContact","update","deltaTime","applyForceToCenter","selfCollider","otherCollider","contact","name","destroyStar","scoreLabel","string","event","keyCode","KEY_A","ARROW_LEFT","KEY_D","ARROW_RIGHT","SPACE","ARROW_UP"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, KeyCode, input, Input, systemEvent, SystemEventType, EventKeyboard, macro, Vec2, RigidBody2D, Collider2D, BoxCollider2D, Contact2DType, IPhysics2DContact, Label} from 'cc';\nimport bridge from '@vkontakte/vk-bridge';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Player')\nexport class Player extends Component {\n\n    @property({type: Label})\n    private scoreLabel: Label | null = null;\n    private score: number = 0;\n\n    private collider: any;\n\n    private rigidbody: any;\n    private direction: number = 0;\n    private walk_force: number = 1000;\n    private jump_force: number = 35000;\n   \n\n    onLoad() {\n        bridge.send(\"VKWebAppInit\", {});\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\n    }\n\n    start () {\n        this.rigidbody = this.node.getComponent(RigidBody2D);\n\n        this.collider = this.node.getComponent(BoxCollider2D);\n        if( this.collider ) {\n            this.collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n        }\n    }\n\n    update (deltaTime: number) {\n        this.rigidbody.applyForceToCenter( new Vec2( this.direction * this.walk_force, 0 ), true );\n    }\n\n    onBeginContact( selfCollider: BoxCollider2D, otherCollider: BoxCollider2D, contact: IPhysics2DContact | null ) {\n        \n        if( otherCollider.name == \"star<BoxCollider2D>\" ){\n            otherCollider.node.getComponent(\"Star\").destroyStar();\n            this.score++;\n            this.scoreLabel.string = \"Score: \" + this.score;\n        }\n\n    }\n\n    onKeyDown(event: EventKeyboard) {\n        switch ( event.keyCode ) {\n            case KeyCode.KEY_A:\n            case KeyCode.ARROW_LEFT: {\n                this.direction = -1;\n                break;\n            }\n            case KeyCode.KEY_D:\n            case KeyCode.ARROW_RIGHT: {\n                this.direction = 1;\n                break;\n            }\n            case KeyCode.SPACE:\n            case KeyCode.ARROW_UP: {\n                this.rigidbody.applyForceToCenter( new Vec2( 0, this.jump_force ), true );\n                break;\n            }\n            default:\n                break;\n        }\n    }\n\n    onKeyUp(event: EventKeyboard) {\n        switch ( event.keyCode ) {\n            case KeyCode.KEY_A:\n            case KeyCode.ARROW_LEFT: {\n                this.direction = 0;\n                break;\n            }\n            case KeyCode.KEY_D:\n            case KeyCode.ARROW_RIGHT: {\n                this.direction = 0;\n                break;\n            }\n            default:\n                break;\n        }\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}