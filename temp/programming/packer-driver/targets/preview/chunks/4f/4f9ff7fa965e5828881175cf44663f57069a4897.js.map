{"version":3,"sources":["file:///D:/Documents/2d-game-cocos-creator-v.3-main/2d-game-cocos-creator-v.3-main/assets/character/player.ts"],"names":["_decorator","Component","systemEvent","SystemEventType","macro","Vec2","RigidBody2D","BoxCollider2D","Contact2DType","Label","ccclass","property","Player","type","score","collider","rigidbody","direction","walk_force","jump_force","onLoad","on","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","start","node","getComponent","BEGIN_CONTACT","onBeginContact","update","deltaTime","applyForceToCenter","selfCollider","otherCollider","contact","name","destroyStar","scoreLabel","string","event","keyCode","KEY","a","left","d","right","space","up"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, systemEvent, SystemEventType, EventKeyboard, macro, Vec2, RigidBody2D, Collider2D, BoxCollider2D, Contact2DType, IPhysics2DContact, Label } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Player')\nexport class Player extends Component {\n\n    @property({ type: Label })\n    private scoreLabel: Label | null = null;\n    private score: number = 0;\n\n    private collider: any;\n\n    private rigidbody: any;\n    private direction: number = 0;\n    private walk_force: number = 1000;\n    private jump_force: number = 35000;\n\n\n    onLoad() {\n        systemEvent.on(SystemEventType.KEY_DOWN, this.onKeyDown, this);\n        systemEvent.on(SystemEventType.KEY_UP, this.onKeyUp, this);\n    }\n\n    start() {\n        this.rigidbody = this.node.getComponent(RigidBody2D);\n\n        this.collider = this.node.getComponent(BoxCollider2D);\n        if (this.collider) {\n            this.collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n        }\n    }\n\n    update(deltaTime: number) {\n        this.rigidbody.applyForceToCenter(new Vec2(this.direction * this.walk_force, 0), true);\n    }\n\n    onBeginContact(selfCollider: BoxCollider2D, otherCollider: BoxCollider2D, contact: IPhysics2DContact | null) {\n\n        if (otherCollider.name == \"star<BoxCollider2D>\") {\n            otherCollider.node.getComponent(\"Star\").destroyStar();\n            this.score++;\n            this.scoreLabel.string = \"Score: \" + this.score;\n        }\n\n    }\n\n    onKeyDown(event: EventKeyboard) {\n        switch (event.keyCode) {\n            case macro.KEY.a:\n            case macro.KEY.left: {\n                this.direction = -1;\n                break;\n            }\n            case macro.KEY.d:\n            case macro.KEY.right: {\n                this.direction = 1;\n                break;\n            }\n            case macro.KEY.space:\n            case macro.KEY.up: {\n                this.rigidbody.applyForceToCenter(new Vec2(0, this.jump_force), true);\n                break;\n            }\n            default:\n                break;\n        }\n    }\n\n    onKeyUp(event: EventKeyboard) {\n        switch (event.keyCode) {\n            case macro.KEY.a:\n            case macro.KEY.left: {\n                this.direction = 0;\n                break;\n            }\n            case macro.KEY.d:\n            case macro.KEY.right: {\n                this.direction = 0;\n                break;\n            }\n            default:\n                break;\n        }\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.0/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.0/manual/en/scripting/ccclass.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.0/manual/en/scripting/life-cycle-callbacks.html\n */"]}